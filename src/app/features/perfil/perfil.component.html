<div
  *ngIf="loading"
  class="flex justify-center items-center h-64"
  style="background-image: url('/127724387_p0_master1200.jpg'); background-size: cover; background-position: center;"
>
  <mat-spinner color="accent"></mat-spinner>
</div>

<div
  *ngIf="!loading"
  class="min-h-screen py-8 flex items-center justify-center"
  style="background-image: url('/127724387_p0_master1200.jpg'); background-size: cover; background-position: center;"
>
  <div class="w-full max-w-2xl mx-auto">
    <h2 class="text-3xl font-bold mb-8 text-center text-cyan-400 tracking-wide drop-shadow">Perfil de Usuario</h2>
    <form
      [formGroup]="profileForm"
      (ngSubmit)="onSubmit()"
      class="bg-gray-800 bg-opacity-85 backdrop-blur-md p-8 rounded-2xl shadow-xl space-y-6 border border-cyan-700"
    >
      <!-- Username (no editable) -->
      <mat-form-field class="w-full text-cyan-300">
        <mat-label>Usuario</mat-label>
        <input matInput formControlName="username">
      </mat-form-field>

      <!-- Nombre -->
      <mat-form-field class="w-full text-cyan-300">
        <mat-label>Nombre</mat-label>
        <input matInput formControlName="firstName" required maxlength="100">
        <mat-error *ngIf="profileForm.get('firstName')?.hasError('required')">El nombre es obligatorio</mat-error>
      </mat-form-field>

      <!-- Apellidos -->
      <mat-form-field class="w-full text-cyan-300">
        <mat-label>Apellidos</mat-label>
        <input matInput formControlName="lastName" required maxlength="100">
        <mat-error *ngIf="profileForm.get('lastName')?.hasError('required')">Los apellidos son obligatorios</mat-error>
      </mat-form-field>

      <button
        mat-raised-button
        color="primary"
        class="w-full rounded-xl font-semibold py-2 mt-4 bg-cyan-600 hover:bg-cyan-500 text-white shadow transition-all duration-150"
        type="submit"
        [disabled]="profileForm.invalid || saving">
        Guardar perfil
      </button>

      <div *ngIf="error" class="text-red-400 text-center mt-4">{{ error }}</div>
      <div *ngIf="success" class="text-green-400 text-center mt-4">{{ success }}</div>
    </form>
  </div>
</div>
